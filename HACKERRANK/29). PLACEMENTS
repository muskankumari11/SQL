SELECT STUDENTS.NAME
FROM STUDENTS
LEFT JOIN FRIENDS ON STUDENTS.ID = FRIENDS.ID
LEFT JOIN PACKAGES P1 ON STUDENTS.ID = P1.ID
LEFT JOIN PACKAGES P2 ON FRIENDS.FRIEND_ID = P2.ID 
WHERE P1.Salary < P2.Salary
ORDER BY P2.Salary;
